diff -ru vmmon-only/include/compat_semaphore.h vmmon-new/include/compat_semaphore.h
--- vmmon-only/include/compat_semaphore.h	2008-08-08 23:39:47.000000000 +0200
+++ vmmon-new/include/compat_semaphore.h	2008-11-10 02:56:15.000000000 +0100
@@ -2,7 +2,7 @@
 #   define __COMPAT_SEMAPHORE_H__
 
 
-#include <asm/semaphore.h>
+#include <linux/semaphore.h>
 
 
 /*
diff -ru vmmon-only/include/x86paging.h vmmon-new/include/x86paging.h
--- vmmon-only/include/x86paging.h	2008-08-08 23:39:47.000000000 +0200
+++ vmmon-new/include/x86paging.h	2008-11-10 03:20:47.000000000 +0100
@@ -58,7 +58,6 @@
 
 #define PTE_AVAIL_MASK       0xe00
 #define PTE_AVAIL_SHIFT      9
-#define PTE_PFN_MASK         0xfffff000
 #define PAE_PTE_PFN_MASK     CONST64U(0xffffff000)
 #define LM_PTE_PFN_MASK      CONST64U(0xffffffffff000)
 #define PTE_PFN_SHIFT        12
diff -ru vmmon-only/linux/hostif.c vmmon-new/linux/hostif.c
--- vmmon-only/linux/hostif.c	2008-08-08 23:39:47.000000000 +0200
+++ vmmon-new/linux/hostif.c	2008-11-10 03:13:04.000000000 +0100
@@ -3348,6 +3348,7 @@
 int
 HostIF_SetFastClockRate(unsigned int rate) // IN: Frequency in Hz.
 {
+   siginfo_t info;
    ASSERT(MutexIsLocked(&fastClockMutex));
    linuxState.fastClockRate = rate;
 
@@ -3421,7 +3422,9 @@
       }
    } else {
       if (linuxState.fastClockThread) {
-         kill_proc(linuxState.fastClockThread, SIGKILL, 1);
+         info.si_signo = SIGKILL;
+         info.si_code = SI_KERNEL;
+         kill_proc_info(linuxState.fastClockThread, &info, 1);
          linuxState.fastClockThread = 0;
          compat_wait_for_completion(&fastClockExited);
       }
